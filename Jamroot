import os ;

local BOOST_ROOT = [ os.environ BOOST_ROOT ] ;
use-project /boost : $(BOOST_ROOT) ;

project bayesian_network
    : requirements
        <toolset>msvc:<cxxflags>-DNOMINMAX
        <toolset>gcc:<cxxflags>-std=c++1y
        <toolset>clang:<cxxflags>-std=c++1y
    : build-dir bin.v2
    ;

#
# Collect build information
#
libraries = [ MATCH .*libs/(.*)/build/.* : [ glob libs/*/build/Jamfile.v2 ] [ glob libs/*/build/Jamfile ] ] ;

#
# Data show options process
#
if --show-all-libraries in [ modules.peek : ARGV ]
{
    echo "Following libraries are exist:" ;
    for local l in $(all-libraries)
    {
        echo " - $(l)" ;
    }
    exit ;
}

if --show-libraries in [ modules.peek : ARGV ]
{
    echo "Following libraries are building target:" ;
    for local l in $(libraries)
    {
        echo " - $(l)" ;
    }
    exit ;
}

for local l in $(all-libraries)
{
    use-project /$(l) : libs/$(l)/build ;
    build-project libs/$(l)/build ;
}

build-project libs/bayesian/test ;

